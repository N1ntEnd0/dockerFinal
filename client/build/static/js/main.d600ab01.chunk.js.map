{"version":3,"sources":["store/reducers/tokenStorage/accessStore.js","http/index.js","service/login.js","store/reducers/authStorage/authStore.js","components/Header/Header.js","requests/GetRedirectUrl.js","components/Footer/Footer.js","components/Content/File/File.js","components/Content/Content.js","requests/useFileSearch.js","components/MainPage/MainPage.js","App.js","reportWebVitals.js","store/index.js","index.js","components/Content/Content.module.scss","components/Content/File/File.module.scss","components/Header/Header.module.scss","components/Footer/Footer.module.scss","components/MainPage/MainPage.module.scss"],"names":["SET_ACCESS","API_URL","process","$api","axios","create","withCredentials","baseURL","interceptors","request","use","config","headers","Authorization","localStorage","getItem","login","state","code","a","method","url","console","log","response","data","details","SET_AUTH","Header","dispatch","useDispatch","location","useLocation","useEffect","URLSearchParams","search","has","get","then","resp","type","payload","access","window","href","catch","err","className","style","Header__title","Button","label","onClick","params","redirect_uri","authorization_url","res","Footer","items","useSelector","accessToken","id","element","document","createElement","download_url","setAttribute","body","appendChild","click","removeChild","name","File","React","forwardRef","ref","file","useState","selected","setSelected","hovered","setHovered","showTooltip","setShowTooltip","anchorRef","useRef","handleClick","classNames","File_selected","onMouseOver","onMouseOut","File__icon","IconClose","size","IconCheck","src","height","width","File__name","Tooltip","File__tip","direction","Content","pageNumber","setPageNumber","selectedFiles","setSelectedFiles","authStatus","authorized","loading","setLoading","error","setError","files","setFiles","hasMore","setHasMore","controller","AbortController","page","page_size","signal","results","next","isCancel","abort","useFileSearch","observer","lastFileElementRef","useCallback","node","current","disconnect","IntersectionObserver","entries","isIntersecting","prevPageNumber","observe","handleSelect","checkSelected","toast","position","Container","map","index","length","Info","Info__loading","Info__error","Info__auth","MainPage","App","Theme","preset","presetGpnDefault","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","accessPersistConfig","key","storage","CookieStorage","Cookies","expiration","whitelist","authStatusPersistConfig","rootReducer","combineReducers","persistReducer","action","store","createStore","applyMiddleware","thunk","persistor","persistStore","ReactDOM","render","StrictMode","getElementById","module","exports"],"mappings":"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","file":"static/js/main.d600ab01.chunk.js","sourcesContent":["const SET_ACCESS = 'access/SET_ACCESS';\n\nexport const accessReducer = (state = {accessToken:\"\"}, action) => {\n  switch (action.type) {\n    case SET_ACCESS: {\n      return {accessToken: action.payload};\n    }\n    default:\n      return state;\n  }\n};\n\n\nexport const setAccessAction = (payload) => ({ type: SET_ACCESS, payload });\n\n\n\n","import axios from 'axios';\n\n// export const API_URL = 'https://share-my-gdrive.herokuapp.com/api';\n// export const API_URL = 'http://localhost:8000';\n// export const API_URL = 'https://infinity-gdrive.space';\nexport const API_URL = process.env.REACT_APP_URL\n\nconst $api = axios.create({\n  withCredentials: true,\n  baseURL: `${API_URL}/api`,\n})\n\n$api.interceptors.request.use((config) => {\n  config.headers.Authorization = `Bearer ${localStorage.getItem('token')}`\n  return config;\n})\n\nexport default $api;","import React from 'react'\nimport $api, {API_URL} from '../http'\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setAccessAction } from '../store/reducers/tokenStorage/accessStore'\nimport axios from 'axios'\n\nexport const login = async (state, code) => {\n    // const dispatch = useDispatch();\n\n    try {\n        return axios({\n            method: 'POST',\n            // url: `http://share-my-gdrive.herokuapp.com/api/auth/social/o/google-oauth2/?state=${url.get('state')}&code=${url.get('code')}`,\n            // url: `http://localhost:8000/api/auth/social/o/google-oauth2/?state=${state}&code=${code}`,\n            url: `${API_URL}/api/auth/social/o/google-oauth2/?state=${state}&code=${code}`,\n            headers: {\n              'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\n            },\n            withCredentials: true,\n        })\n\n    } catch (e) {\n        console.log(e.response?.data?.details);\n    }\n}\n\n\n","const SET_AUTH = 'auth/SET_STATUS';\n\nexport const authReducer = (state = {authStatus:false}, action) => {\n  switch (action.type) {\n    case SET_AUTH: {\n      return {authStatus: action.payload};\n    }\n    default:\n      return state;\n  }\n};\n\nexport const setAuthStatusAction = (payload) => ({ type: SET_AUTH, payload });\n\n\n\n","import React, { useEffect } from 'react'\nimport style from './Header.module.scss';\nimport {Button} from \"@consta/uikit/Button\";\nimport { useDispatch, useSelector } from 'react-redux'\nimport { setAccessAction } from '../../store/reducers/tokenStorage/accessStore'\nimport { GetRedirectUrl } from '../../requests/GetRedirectUrl'\nimport axios from 'axios'\nimport { useLocation } from 'react-router'\nimport { login } from '../../service/login'\nimport { setAuthStatusAction } from '../../store/reducers/authStorage/authStore'\nimport {API_URL} from \"../../http\";\n\nexport const Header = () => {\n    const dispatch = useDispatch();\n\n    const location = useLocation();\n\n    useEffect(() => {\n        let url = new URLSearchParams(location.search);\n        if (url.has('state') && url.has('code')) {\n            // console.log('state ' + url.get('state'));\n            // console.log('code ' + url.get('code'))\n            //\n            // axios({\n            //   method: 'POST',\n            //   url: `http://share-my-gdrive.herokuapp.com/api/auth/social/o/google-oauth2/?state=${url.get('state')}&code=${url.get('code')}`,\n            //   url: `http://localhost:8000/api/auth/social/o/google-oauth2/?state=${url.get('state')}&code=${url.get('code')}`,\n              // headers: {\n              //   'Content-Type': 'application/x-www-form-urlencoded;charset=UTF-8'\n              // },\n              // withCredentials: true,\n            // })\n            //   .then(res => {\n            //   console.log('token ' + res.data.access)\n            // })\n            login(url.get('state'), url.get('code'))\n              .then((resp) => {\n                dispatch(setAuthStatusAction(true));\n                return resp;\n              })\n              .then(response => {\n                dispatch(setAccessAction(response.data.access));\n                //todo save refresh\n                // dispatch(setAccessAction(response.data.refresh));\n                // localStorage.setItem('accessToken', response.data.access);\n                // localStorage.setItem('refreshToken', response.data.refresh);\n                // window.location.href='http://localhost:3000/';\n                window.location.href=`${API_URL}/`;\n              })\n              .catch((err) => {\n                //todo toast сервер временно недоступен\n                console.log(err)\n              })\n        }\n    }, [location.search])\n\n    const handleClick = () => {\n        GetRedirectUrl()\n          .then(res => {\n            window.location.href=res;\n          });\n    }\n\n    return (\n        <header className={style.Header}>\n            <h1 className={style.Header__title}>\n                Google Share\n            </h1>\n            <Button label=\"Войти\" onClick={handleClick} />\n        </header>\n    );\n}\n\n","import React, { useState } from 'react'\nimport axios from 'axios'\nimport {API_URL} from \"../http\";\n\nexport const  GetRedirectUrl = () => {\n\n  return axios({\n    method: 'GET',\n    // url:'https://share-my-gdrive.herokuapp.com/api/auth/social/o/google-oauth2',\n    // url:'http://localhost:8000/api/auth/social/o/google-oauth2',\n    url:`${API_URL}/api/auth/social/o/google-oauth2`,\n    params: {\n      redirect_uri: 'http://localhost:3000/'\n      // redirect_uri: `${API_URL}/`\n    },\n    withCredentials: true,\n  })\n    .then(resp => {\n      return resp.data.authorization_url;\n    });\n};\n\n","import React from 'react';\nimport style from './Footer.module.scss';\nimport {Button} from \"@consta/uikit/Button\";\nimport { toast } from 'react-hot-toast'\nimport axios from 'axios'\nimport { useSelector } from 'react-redux'\nimport {API_URL} from \"../../http\";\n\nexport const Footer = ({ items }) => {\n    const access = useSelector(state => state.accessToken.accessToken)\n\n    const getLabel = () => {\n        if (items) {\n            if (items.length === 1) {\n                return items[0].name;\n            } else {\n                return `Выбрано ${items.length} ${items.length < 5 ? 'элемента' : 'элементов'}`\n            }\n        } else {\n            return 'Ничего не выбрано';\n        }\n    }\n\n    const handleClick = () => {\n        axios({\n            method: 'POST',\n            // url: `http://localhost:8000/api/v1/files/${items.id}/download/`,\n            url: `${API_URL}/api/v1/files/${items.id}/download/`,\n            headers: {\n                'Authorization': `Bearer ${access}`\n            },\n        })\n          .then(resp => {\n            const element = document.createElement('a');\n            element.href = resp.data.download_url;\n            element.setAttribute('download', '123');\n            document.body.appendChild(element);\n            element.click();\n            document.body.removeChild(element);\n              // console.log('aa')\n\n\n\n             /* const url = window.URL\n                .createObjectURL(new Blob([resp.data.download_url]));\n              const link = document.createElement('a');\n              link.href = url;\n              link.setAttribute('download', '123');\n              document.body.appendChild(link);\n              link.click();\n              document.body.removeChild(link);*/\n\n            })\n          // .then(resp => {\n          //     axios({\n          //         method: \"GET\",\n          //         url: resp.data.download_url,\n          //         responseType: 'blob',\n          //         withCredentials: true\n          //     })\n          //       .then(response => {\n          //           const url = window.URL\n          //                 .createObjectURL(new Blob([response.data]));\n          //           const link = document.createElement('a');\n          //           link.href = url;\n          //           link.setAttribute('download');\n          //           document.body.appendChild(link);\n          //           link.click();\n          //           document.body.removeChild(link);\n          //       })\n          // })\n\n          // .then(resp => {\n          //   const url = window.URL\n          //     .createObjectURL(new Blob([resp.data]));\n          //   const link = document.createElement('a');\n          //   link.href = url;\n          //   link.setAttribute('download', '123');\n          //   document.body.appendChild(link);\n          //   link.click();\n          //   document.body.removeChild(link);\n        // })\n\n            // axios({\n            //     method: \"GET\",\n            //     url: resp.data.download_url,\n            //     responseType: 'blob',\n            //     withCredentials: true\n            // })\n            //   .then(response => {\n            //       const url = window.URL\n            //             .createObjectURL(new Blob([response.data]));\n            //       const link = document.createElement('a');\n            //       link.href = url;\n            //       link.setAttribute('download');\n            //       document.body.appendChild(link);\n            //       link.click();\n            //       document.body.removeChild(link);\n            //   })\n          // console.log(resp.data.download_url)\n        // })\n\n    }\n\n    return (\n        <div className={style.Footer}>\n            <Button onClick={handleClick} label=\"Скачать\" />\n            {/*<span>{getLabel()}</span>*/}\n            <span>{items.name}</span>\n        </div>\n    );\n}\n","import React, {useState, useRef} from 'react';\nimport style from './File.module.scss';\nimport {Tooltip} from \"@consta/uikit/Tooltip\";\nimport { IconCheck } from \"@consta/uikit/IconCheck\";\nimport { IconClose } from \"@consta/uikit/IconClose\";\nimport classNames from \"classnames\";\nimport axios from 'axios'\n\nexport const File = React.forwardRef(({file, onClick}, ref) => {\n    const [selected, setSelected] = useState(false);\n    const [hovered, setHovered] = useState(false);\n    const [showTooltip, setShowTooltip] = useState(false);\n\n    const anchorRef = useRef(null);\n\n    const handleClick = (file) => {\n         // setSelected(!selected)\n         onClick(file, setSelected);\n    }\n\n    // const downloadImg = (url) => {\n    //     return axios.get({\n    //         method: 'GET',\n    //         url: url,\n    //         withCredentials: true,\n    //     })\n    //       .then(resp => {\n    //           return resp.data\n    //       })\n    // }\n\n    return (\n        <div\n            className={classNames(style.File, {\n                [style.File_selected]: selected\n            })}\n            onMouseOver={() => setHovered(true)}\n            onMouseOut={() => setHovered(false)}\n            key={file.id}\n            onClick={() => handleClick(file)}\n            ref={ref}\n        >\n            {selected && (\n                <div className={style.File__icon}>\n                    {hovered\n                        ? <IconClose size=\"s\"/>\n                        : <IconCheck size=\"s\"/>}\n                </div>\n            )}\n            <img\n                src=\"https://findicons.com/files/icons/2813/flat_jewels/512/file.png\"\n                // src={file.iconLink}\n                // src={() => downloadImg(file.thumbnailLink)}\n                height=\"100\"\n                width=\"100\"\n            />\n            <div\n                className={style.File__name}\n                ref={anchorRef}\n                onMouseOver={() => setShowTooltip(true)}\n                onMouseOut={() => setShowTooltip(false)}\n            >\n                {file.name}\n            </div>\n            {showTooltip && (\n                <Tooltip\n                    className={style.File__tip}\n                    direction={\"downCenter\"}\n                    size=\"s\"\n                    anchorRef={anchorRef}\n                >\n                    {file.name}\n                </Tooltip>\n            )}\n        </div>\n    );\n});\n","import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport style from \"./Content.module.scss\";\nimport {useFileSearch} from \"../../requests/useFileSearch\";\nimport {File} from \"./File/File\";\nimport {Footer} from \"../Footer/Footer\";\nimport { login } from '../../service/login'\nimport { useSelector } from 'react-redux'\nimport { toast } from 'react-hot-toast'\n\nexport const Content = () => {\n    const [pageNumber, setPageNumber] = useState(1);\n    const [selected, setSelected] = useState(false);\n    const [selectedFiles, setSelectedFiles] = useState([])\n    const authStatus = useSelector(state => state.authStatus.authStatus);\n\n    const {\n        files,\n        hasMore,\n        loading,\n        error\n    } = useFileSearch(authStatus, pageNumber);\n\n\n    const observer = useRef();\n    const lastFileElementRef = useCallback(node => {\n        if (loading) return\n        if (observer.current) observer.current.disconnect()\n        observer.current = new IntersectionObserver(entries => {\n            if (entries[0].isIntersecting && hasMore) {\n                setPageNumber(prevPageNumber => prevPageNumber + 1);\n            }\n        })\n        if (node) observer.current.observe(node);\n    }, [loading, hasMore]);\n\n    const handleSelect = (file, checkSelected) => {\n        if (selectedFiles === file) {\n            setSelectedFiles([]);\n            setSelected(false);\n            checkSelected(false);\n        }\n        if (selectedFiles !== file && !selected) {\n            setSelectedFiles(file);\n            setSelected(true);\n            checkSelected(true);\n        }\n        if (selectedFiles !== file && selected) {\n            toast.error(\"Выбрать можно только 1 файл\", {\n                  position: 'top-right'\n            });\n        }\n        /*if (selectedFiles.indexOf(file) === -1) {\n            setSelectedFiles([...selectedFiles, file]);\n            setSelected(true);\n        } else {\n            const copyArr = [...selectedFiles];\n            copyArr.splice(selectedFiles.indexOf(file), 1)\n            setSelectedFiles(copyArr);\n            setSelected(copyArr.length > 0);\n        }*/\n    }\n    return (\n        <div className={style.Content}>\n            <div className={style.Container}>\n                {files.map((file, index) => {\n                    if (files.length === index + 1) {\n                        return (\n                            <File\n                                onClick={(file, checkSelected) => handleSelect(file, checkSelected)}\n                                // onClick={(file) => handleSelect(file)\n                                file={file}\n                                ref={lastFileElementRef}\n                            />\n                        )\n                    } else {\n                        return <File file={file} onClick={(file, checkSelected) => handleSelect(file, checkSelected)} />\n                    }\n                })}\n            </div>\n            <div className={style.Info}>\n                {\n                    authStatus\n                      ?\n                      <div>\n                          <div className={style.Info__loading} >{loading && 'Loading...'}</div>\n                          <div className={style.Info__error} >{error && 'Error...'}</div>\n                      </div>\n                      :\n                      <div className={style.Info__auth} >Авторизуйтесь для просмотра файлов</div>\n                }\n            </div>\n            {selected && <Footer items={selectedFiles} />}\n        </div>\n\n    );\n}","import React, {useEffect, useState} from 'react';\nimport axios from \"axios\";\nimport { useSelector } from 'react-redux'\nimport {API_URL} from \"../http\";\n\nexport const useFileSearch = (authorized, pageNumber) => {\n    const [loading, setLoading] = useState(true);\n    const [error, setError] = useState(false);\n    const [files, setFiles] = useState([]);\n    const [hasMore, setHasMore] = useState(false);\n    const access = useSelector(state => state.accessToken.accessToken)\n\n    useEffect(() => {\n        if (authorized) {\n            setLoading(true);\n            setError(false);\n            let controller = new AbortController();\n            axios({\n                method: 'GET',\n                // url: 'http://localhost:8000/api/v1/files/',\n                url: `${API_URL}/api/v1/files/`,\n                params: { page: pageNumber, page_size: 10 },\n                signal: controller.signal,\n                headers: {\n                    'Authorization': `Bearer ${access}`\n                },\n            }).then(res => {\n                // console.log(res.data)\n                setFiles(files => {\n                    return [...files, ...res.data.results];\n                });\n                setHasMore(res.data.next !== null);\n                setLoading(false);\n            }).catch(err => {\n                if (axios.isCancel(err)) return\n                setError(true);\n            })\n\n            return () => controller.abort();\n        }\n    }, [pageNumber])\n\n    return { loading, error, files, hasMore };\n};\n\n","import React, { useEffect, useRef, useState } from 'react'\nimport {Header} from \"../Header/Header\";\nimport {Footer} from \"../Footer/Footer\";\nimport style from \"./MainPage.module.scss\";\nimport {Content} from \"../Content/Content\";\nimport { Toaster } from 'react-hot-toast'\n\nexport const MainPage = () => {\n\n    return (\n        <div className={style.MainPage}>\n            <Header />\n            <Content />\n          <Toaster />\n        </div>\n    );\n};\n","import './App.scss';\nimport 'bootstrap/dist/css/bootstrap.min.css';\nimport {presetGpnDefault, Theme} from \"@consta/uikit/Theme\";\nimport {MainPage} from \"./components/MainPage/MainPage\";\nimport { BrowserRouter } from 'react-router-dom'\n\nfunction App() {\n  return (\n    <BrowserRouter>\n      <Theme preset={presetGpnDefault}>\n        <MainPage />\n      </Theme>\n    </BrowserRouter>\n  );\n}\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import { applyMiddleware, combineReducers, createStore } from 'redux'\nimport thunk from 'redux-thunk'\nimport { persistStore } from 'redux-persist'\nimport { CookieStorage } from 'redux-persist-cookie-storage'\nimport Cookies from 'cookies-js'\nimport { accessReducer } from './reducers/tokenStorage/accessStore'\nimport persistReducer from 'redux-persist/es/persistReducer'\nimport { authReducer } from './reducers/authStorage/authStore'\n\n\nconst accessPersistConfig = {\n  key: 'accessToken',\n  storage: new CookieStorage(Cookies, {\n    expiration: {\n      'default': 86400 // one day\n    }\n  }),\n  whitelist: ['accessToken']\n}\n\nconst authStatusPersistConfig = {\n  key: 'authStatus',\n  storage: new CookieStorage(Cookies, {\n    expiration: {\n      'default': 86400\n    }\n  }),\n  whitelist: ['authStatus']\n}\n\n\nconst rootReducer = combineReducers({\n  accessToken:persistReducer(accessPersistConfig, accessReducer),\n  authStatus:persistReducer(authStatusPersistConfig, authReducer),\n})\n\n\nexport const store = createStore(rootReducer, applyMiddleware(thunk));\nexport const persistor = persistStore(store, {});","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.scss';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\nimport { Provider } from 'react-redux'\nimport { PersistGate } from 'redux-persist/integration/react'\nimport { persistor, store } from './store'\n\nReactDOM.render(\n  <Provider store={store}>\n    <PersistGate persistor={persistor}>\n      <React.StrictMode>\n        <App />\n      </React.StrictMode>\n    </PersistGate>\n  </Provider>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Content\":\"Content_Content__20LeB\",\"Container\":\"Content_Container__1GHiz\",\"Info\":\"Content_Info__1YcWL\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"File\":\"File_File__3xmFo\",\"File__icon\":\"File_File__icon__3HZi1\",\"File__name\":\"File_File__name__1ugq0\",\"File__tip\":\"File_File__tip__1mD-R\",\"File_selected\":\"File_File_selected__3eIGn\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Header\":\"Header_Header__1CTzX\",\"Header__title\":\"Header_Header__title__3B4qP\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Footer\":\"Footer_Footer__37hEc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"MainPage\":\"MainPage_MainPage__2bW37\"};"],"sourceRoot":""}